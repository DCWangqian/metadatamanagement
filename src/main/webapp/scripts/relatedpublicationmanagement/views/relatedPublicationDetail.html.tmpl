<div ng-if="ctrl.relatedPublication.id">
  <previous-search-result bowser="bowser" current-language="currentLanguage"></previous-search-result>
  <next-search-result bowser="bowser" current-language="currentLanguage"></next-search-result>
  <div class="fdz-cc">
    <div layout="row" layout-margin style="margin-bottom: 0px;">
      <h1 class="md-headline fdz-headline">
        <span fdz-hyphenate lang="{{ctrl.relatedPublication.language}}">{{ctrl.relatedPublication.title}}</span>
        <span class="label label-as-badge label-default">{{ctrl.relatedPublication.id}}</span>
      </h1>
      <json-content-dialog class="mb0" content="ctrl.relatedPublication"
                           exclude-fields="ctrl.jsonExcludes" header-title="ctrl.relatedPublication.title"
                           ng-if="ctrl.enableJsonView"></json-content-dialog>
    </div>
    <div layout="column" layout-gt-sm="row">
      <div flex-gt-sm="50" layout="column">
        <md-card flex="auto">
          <md-card-header>
            <md-card-header-text>
              <h2 class="md-title">{{'global.cards.details' | translate }}</h2>
            </md-card-header-text>
          </md-card-header>
          <md-divider></md-divider>
          <md-card-content>
            <div class="fdz-add-bottom-margin" ng-if="ctrl.relatedPublication.authors">
              <span
                style="font-weight: bold;">{{'related-publication-management.detail.label.authors' | translate }}:</span>
              <span>{{ctrl.relatedPublication.authors}}</span>
            </div>
            <div class="fdz-add-bottom-margin" ng-if="ctrl.relatedPublication.year">
              <span
                style="font-weight: bold;">{{'related-publication-management.detail.label.year' | translate }}:</span>
              <span>{{ctrl.relatedPublication.year}}</span>
            </div>
            <div class="fdz-add-bottom-margin" ng-if="ctrl.relatedPublication.sourceReference">
              <span style="font-weight: bold;">{{'related-publication-management.detail.label.source-reference' | translate }}:</span>
              <span class="fdz-multiline-property" lang="{{ctrl.relatedPublication.language}}">{{ctrl.relatedPublication.sourceReference}}</span>
            </div>
            <div class="fdz-add-bottom-margin" ng-if="ctrl.relatedPublication.doi">
              <span
                style="font-weight: bold;">{{'related-publication-management.detail.label.doi' | translate }}:</span>
              <a ng-href="https://dx.doi.org/{{ctrl.relatedPublication.doi}}" target="_blank">{{ctrl.relatedPublication.doi}}
                <md-tooltip md-autohide="true" md-z-index="bowser.mobile || bowser.tablet ? -100 : 100001">
                  {{'related-publication-management.detail.doi-tooltip' | translate}}
                </md-tooltip>
              </a>
            </div>
            <div class="fdz-add-bottom-margin" layout="row" ng-if="ctrl.relatedPublication.sourceLink">
              <span style="font-weight: bold;">{{'related-publication-management.detail.label.sourceLink' | translate }}:&nbsp;</span>
              <a class="fdz-truncate-string" ng-href="{{ctrl.relatedPublication.sourceLink}}" style="display: block;"
                 target="_blank">{{ctrl.relatedPublication.sourceLink}}
                <md-tooltip md-autohide="true" md-z-index="bowser.mobile || bowser.tablet ? -100 : 100001">
                  {{'related-publication-management.detail.sourceLink-tooltip' | translate}}
                </md-tooltip>
              </a>
            </div>
          </md-card-content>
        </md-card>
      </div>
      <div flex-gt-sm="50" layout="column">
        <md-card flex="auto"
                 ng-class="{'fdz-reset-left-margin': $mdMedia('gt-sm'), 'fdz-reset-top-margin': $mdMedia('sm') || $mdMedia('xs')}"
                 ng-init="studies = ctrl.relatedPublication.studies">
          <md-card-header>
            <md-card-header-text>
              <h2 class="md-title">{{'global.cards.related-objects' | translate }}</h2>
            </md-card-header-text>
          </md-card-header>
          <md-divider></md-divider>
          <md-card-content>
            <div layout="row" ng-init="studies = ctrl.relatedPublication.studies"
                 style="margin-bottom: 0.5em; width: 100%;">
              <div class="fdz-truncate-string" flex ng-if="studies.length === 0">
                <md-icon md-svg-src="/assets/images/icons/study.svg"></md-icon>
                {{'study-management.detail.label.studies' | translate }}: {{'global.messages.error.unavailable' |
                translate}}
              </div>
              <div class="fdz-truncate-string" flex ng-if="studies.length === 1">
                <a ui-sref="studyDetail({'id': studies[0].id})">
                  <md-icon md-svg-src="/assets/images/icons/study.svg"></md-icon>
                  {{'study-management.detail.label.study' | translate }}:
                  <span display-i18n-string="studies[0].title"></span>
                  <md-tooltip md-autohide="true" md-z-index="bowser.mobile || bowser.tablet ? -100 : 100001">
                    {{'related-publication-management.detail.tooltips.studies.one' | translate}}
                  </md-tooltip>
                </a>
              </div>
              <div class="fdz-truncate-string" flex ng-if="studies.length > 1">
                <a ui-sref="search({'type': 'studies', 'related-publication':ctrl.relatedPublication.id})">
                  <md-icon md-svg-src="/assets/images/icons/study.svg"></md-icon>
                  {{'study-management.detail.label.studies' | translate }}: ({{studies.length}})
                  <md-tooltip md-autohide="true" md-z-index="bowser.mobile || bowser.tablet ? -100 : 100001">
                    {{'related-publication-management.detail.tooltips.studies.many' | translate}}
                  </md-tooltip>
                </a>
              </div>
            </div>
            <div layout="row" ng-if="ctrl.relatedPublication.studySerieses.length"
                 style="margin-bottom: 0.5em; width: 100%;">
              <div ng-if="currentLanguage === 'de'">
                <md-icon md-svg-src="/assets/images/icons/study.svg"></md-icon>
                {{'related-publication-management.detail.label.studySerieses' | translate }}:
                <a ng-repeat="studySeries in ctrl.relatedPublication.studySerieses"
                   ui-sref="search({'type': 'studies', 'study-series-de': studySeries.de})">
                  {{studySeries.de}}{{$last ? '' : ', '}}
                  <md-tooltip md-autohide="true" md-z-index="bowser.mobile || bowser.tablet ? -100 : 100001">
                    {{'related-publication-management.detail.tooltips.studies-series' | translate}}
                  </md-tooltip>
                </a>
              </div>
              <div ng-if="currentLanguage === 'en'">
                <md-icon md-svg-src="/assets/images/icons/study.svg"></md-icon>
                {{'related-publication-management.detail.label.studySerieses' | translate }}:
                <a ng-repeat="studySeries in ctrl.relatedPublication.studySerieses"
                   ui-sref="search({'type': 'studies', 'study-series-en': studySeries.en})">
                  {{studySeries.en}}{{$last ? '' : ', '}}
                  <md-tooltip md-autohide="true" md-z-index="bowser.mobile || bowser.tablet ? -100 : 100001">
                    {{'related-publication-management.detail.tooltips.studies-series' | translate}}
                  </md-tooltip>
                </a>
              </div>
            </div>
            <div layout="row" ng-init="surveys = ctrl.relatedPublication.surveys"
                 style="margin-bottom: 0.5em; width: 100%;">
              <div class="fdz-truncate-string" flex ng-if="surveys.length === 0">
                <md-icon md-svg-src="/assets/images/icons/survey.svg"></md-icon>
                <span ng-if="!ctrl.relatedPublication.surveyIds || ctrl.relatedPublication.surveyIds.length === 0">{{'survey-management.detail.label.surveys' | translate }}: {{'global.messages.error.undocumented' | translate}}</span>
                <span ng-if="ctrl.relatedPublication.surveyIds && ctrl.relatedPublication.surveyIds.length !== 0">{{'survey-management.detail.label.surveys' | translate }}: {{'global.messages.error.unavailable' | translate}}</span>
              </div>
              <div class="fdz-truncate-string" flex ng-if="surveys.length === 1">
                <a ui-sref="surveyDetail({'id': surveys[0].id})">
                  <md-icon md-svg-src="/assets/images/icons/survey.svg"></md-icon>
                  {{'survey-management.detail.label.survey' | translate }}:
                  <span display-i18n-string="surveys[0].title"></span>
                  <md-tooltip md-autohide="true" md-z-index="bowser.mobile || bowser.tablet ? -100 : 100001">
                    {{'related-publication-management.detail.tooltips.surveys.one' | translate}}
                  </md-tooltip>
                </a>
              </div>
              <div class="fdz-truncate-string" flex ng-if="surveys.length > 1">
                <a ui-sref="search({'type': 'surveys', 'related-publication':ctrl.relatedPublication.id})">
                  <md-icon md-svg-src="/assets/images/icons/survey.svg"></md-icon>
                  {{'survey-management.detail.label.surveys' | translate }}: ({{surveys.length}})
                  <md-tooltip md-autohide="true" md-z-index="bowser.mobile || bowser.tablet ? -100 : 100001">
                    {{'related-publication-management.detail.tooltips.surveys.many' | translate}}
                  </md-tooltip>
                </a>
              </div>
            </div>
            <div layout="row" ng-init="instruments = ctrl.relatedPublication.instruments"
                 style="margin-bottom: 0.5em; width: 100%;">
              <div class="fdz-truncate-string" flex ng-if="instruments.length === 0">
                <md-icon md-svg-src="/assets/images/icons/instrument.svg"></md-icon>
                <span
                  ng-if="!ctrl.relatedPublication.instrumentIds || ctrl.relatedPublication.instrumentIds.length === 0">{{'instrument-management.detail.label.instruments' | translate }}: {{'global.messages.error.undocumented' | translate}}</span>
                <span
                  ng-if="ctrl.relatedPublication.instrumentIds && ctrl.relatedPublication.instrumentIds.length !== 0">{{'instrument-management.detail.label.instruments' | translate }}: {{'global.messages.error.unavailable' | translate}}</span>
              </div>
              <div class="fdz-truncate-string" flex ng-if="instruments.length === 1">
                <a ui-sref="instrumentDetail({'id': instruments[0].id})">
                  <md-icon md-svg-src="/assets/images/icons/instrument.svg"></md-icon>
                  {{'instrument-management.detail.label.instrument' | translate }}:
                  <span display-i18n-string="instruments[0].description"></span>
                  <md-tooltip md-autohide="true" md-z-index="bowser.mobile || bowser.tablet ? -100 : 100001">
                    {{'related-publication-management.detail.tooltips.instruments.one' | translate}}
                  </md-tooltip>
                </a>
              </div>
              <div class="fdz-truncate-string" flex ng-if="instruments.length > 1">
                <a ui-sref="search({'type': 'instruments', 'related-publication':ctrl.relatedPublication.id})">
                  <md-icon md-svg-src="/assets/images/icons/instrument.svg"></md-icon>
                  {{'instrument-management.detail.label.instruments' | translate }}: ({{instruments.length}})
                  <md-tooltip md-autohide="true">
                    {{'related-publication-management.detail.tooltips.instruments.many' | translate}}
                  </md-tooltip>
                </a>
              </div>
            </div>
            <div layout="row" ng-init="questions = ctrl.relatedPublication.questions"
                 style="margin-bottom: 0.5em; width: 100%;">
              <div class="fdz-truncate-string" flex ng-if="questions.length === 0">
                <md-icon md-svg-src="/assets/images/icons/question.svg"></md-icon>
                <span ng-if="!ctrl.relatedPublication.questionIds || ctrl.relatedPublication.questionIds.length === 0">{{'question-management.detail.label.questions' | translate }}: {{'global.messages.error.undocumented' | translate}}</span>
                <span ng-if="ctrl.relatedPublication.questionIds && ctrl.relatedPublication.questionIds.length !== 0">{{'question-management.detail.label.questions' | translate }}: {{'global.messages.error.unavailable' | translate}}</span>
              </div>
              <div class="fdz-truncate-string" flex ng-if="questions.length === 1">
                <a ui-sref="questionDetail({'id': questions[0].id})">
                  <md-icon md-svg-src="/assets/images/icons/question.svg"></md-icon>
                  {{'question-management.detail.label.question' | translate }}:
                  <span display-i18n-string="questions[0].questionText"></span>
                  <md-tooltip md-autohide="true" md-z-index="bowser.mobile || bowser.tablet ? -100 : 100001">
                    {{'related-publication-management.detail.tooltips.questions.one' | translate}}
                  </md-tooltip>
                </a>
              </div>
              <div class="fdz-truncate-string" flex ng-if="questions.length > 1">
                <a ui-sref="search({'type': 'questions', 'related-publication':ctrl.relatedPublication.id})">
                  <md-icon md-svg-src="/assets/images/icons/question.svg"></md-icon>
                  {{'question-management.detail.label.questions' | translate }}: ({{questions.length}})
                  <md-tooltip md-autohide="true" md-z-index="bowser.mobile || bowser.tablet ? -100 : 100001">
                    {{'related-publication-management.detail.tooltips.questions.many' | translate}}
                  </md-tooltip>
                </a>
              </div>
            </div>
            <div layout="row" ng-init="dataSets = ctrl.relatedPublication.dataSets"
                 style="margin-bottom: 0.5em; width: 100%;">
              <div class="fdz-truncate-string" flex ng-if="dataSets.length === 0">
                <md-icon md-svg-src="/assets/images/icons/data-set.svg"></md-icon>
                <span ng-if="!ctrl.relatedPublication.dataSetIds || ctrl.relatedPublication.dataSetIds.length === 0">{{'data-set-management.detail.label.data-sets' | translate }}: {{'global.messages.error.undocumented' | translate}}</span>
                <span ng-if="ctrl.relatedPublication.dataSetIds && ctrl.relatedPublication.dataSetIds.length !== 0">{{'data-set-management.detail.label.data-sets' | translate }}: {{'global.messages.error.unavailable' | translate}}</span>
              </div>
              <div class="fdz-truncate-string" flex ng-if="dataSets.length === 1">
                <a ui-sref="dataSetDetail({'id': dataSets[0].id})">
                  <md-icon md-svg-src="/assets/images/icons/data-set.svg"></md-icon>
                  {{'data-set-management.detail.label.data-set' | translate }}:
                  <span display-i18n-string="dataSets[0].description"></span>
                  <md-tooltip md-autohide="true" md-z-index="bowser.mobile || bowser.tablet ? -100 : 100001">
                    {{'related-publication-management.detail.tooltips.data-sets.one' | translate}}
                  </md-tooltip>
                </a>
              </div>
              <div class="fdz-truncate-string" flex ng-if="dataSets.length > 1">
                <a ui-sref="search({'type': 'data_sets', 'related-publication':ctrl.relatedPublication.id})">
                  <md-icon md-svg-src="/assets/images/icons/data-set.svg"></md-icon>
                  {{'data-set-management.detail.label.data-sets' | translate }}: ({{dataSets.length}})
                  <md-tooltip md-autohide="true" md-z-index="bowser.mobile || bowser.tablet ? -100 : 100001">
                    {{'related-publication-management.detail.tooltips.data-sets.many' | translate}}
                  </md-tooltip>
                </a>
              </div>
            </div>
            <div layout="row" ng-init="variables = ctrl.relatedPublication.variables"
                 style="margin-bottom: 0.5em; width: 100%;">
              <div class="fdz-truncate-string" flex ng-if="variables.length === 0">
                <md-icon md-svg-src="/assets/images/icons/variable.svg"></md-icon>
                <span ng-if="!ctrl.relatedPublication.variableIds || ctrl.relatedPublication.variableIds.length === 0">{{'variable-management.detail.label.variables' | translate }}: {{'global.messages.error.undocumented' | translate}}</span>
                <span ng-if="ctrl.relatedPublication.variableIds && ctrl.relatedPublication.variableIds.length !== 0">{{'variable-management.detail.label.variables' | translate }}: {{'global.messages.error.unavailable' | translate}}</span>
              </div>
              <div class="fdz-truncate-string" flex ng-if="variables.length === 1">
                <a ui-sref="variableDetail({'id': variables[0].id})">
                  <md-icon md-svg-src="/assets/images/icons/variable.svg"></md-icon>
                  {{'variable-management.detail.label.variable' | translate }}:
                  <span display-i18n-string="variables[0].label"></span>
                  <md-tooltip md-autohide="true" md-z-index="bowser.mobile || bowser.tablet ? -100 : 100001">
                    {{'related-publication-management.detail.tooltips.variables.one' | translate}}
                  </md-tooltip>
                </a>
              </div>
              <div class="fdz-truncate-string" flex ng-if="variables.length > 1">
                <a ui-sref="search({'type': 'variables', 'related-publication':ctrl.relatedPublication.id})">
                  <md-icon md-svg-src="/assets/images/icons/variable.svg"></md-icon>
                  {{'variable-management.detail.label.variables' | translate }}: ({{variables.length}})
                  <md-tooltip md-autohide="true" md-z-index="bowser.mobile || bowser.tablet ? -100 : 100001">
                    {{'related-publication-management.detail.tooltips.variables.many' | translate}}
                  </md-tooltip>
                </a>
              </div>
            </div>
          </md-card-content>
        </md-card>
      </div>
    </div>
    <div layout="row" ng-if="ctrl.relatedPublication.publicationAbstract">
      <md-card class="fdz-reset-top-margin" flex>
        <md-card-header layout-align="center center">
          <md-card-header-text>
            <h2 class="md-title">{{'related-publication-management.detail.abstract' | translate | fdzHyphenate }}</h2>
          </md-card-header-text>
        </md-card-header>
        <md-divider></md-divider>
        <md-card-content>
          <div class="fdz-add-bottom-margin fdz-text-block">
            <span class="fdz-multiline-property" fdz-hyphenate lang="{{ctrl.relatedPublication.language}}">{{ctrl.relatedPublication.publicationAbstract}}</span>
          </div>
          <div class="fdz-add-bottom-margin" ng-if="ctrl.relatedPublication.abstractSource">
            <span style="font-weight: bold;">{{'related-publication-management.detail.label.abstract-source' | translate }}:</span>
            <span class="fdz-multiline-property" display-i18n-string="ctrl.relatedPublication.abstractSource"></span>
          </div>
        </md-card-content>
      </md-card>
    </div>
  </div>
</div>
