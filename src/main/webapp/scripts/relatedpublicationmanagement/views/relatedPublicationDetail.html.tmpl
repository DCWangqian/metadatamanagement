<div ng-if="ctrl.relatedPublication.id">
    <div layout="row" style="margin-bottom: 0px;" layout-margin>
        <h1 class="md-headline fdz-truncate-string" style="margin-left: 0px;">{{ctrl.relatedPublication.title}} ({{ctrl.relatedPublication.id}})</h1>
    </div>
    <div layout="column" layout-gt-sm="row">
        <md-card flex-gt-sm>
            <md-card-header>
                <md-card-header-text>
                    <h2 class="md-title">{{'global.cards.details' | translate }}</h2>
                </md-card-header-text>
            </md-card-header>
            <md-divider></md-divider>
            <md-card-content>
                <div style="margin-bottom: 0.5em;" ng-if="ctrl.relatedPublication.authors">
                    <span style="font-weight: bold;">{{'related-publication-management.detail.authors' | translate }}:
                </span>
                    <span>{{ctrl.relatedPublication.authors}}</span>
                </div>
                <div style="margin-bottom: 0.5em;" ng-if="ctrl.relatedPublication.year">
                    <span style="font-weight: bold;">{{'related-publication-management.detail.year' | translate }}:
                </span>
                    <span>{{ctrl.relatedPublication.year}}</span>
                </div>
                <div style="margin-bottom: 0.5em;" ng-if="ctrl.relatedPublication.sourceReference">
                    <span style="font-weight: bold;">{{'related-publication-management.detail.source-reference' | translate }}:
                </span>
                    <span>{{ctrl.relatedPublication.sourceReference}}</span>
                </div>
                <div style="margin-bottom: 0.5em;" ng-if="ctrl.relatedPublication.doi">
                    <span style="font-weight: bold;">{{'related-publication-management.detail.doi' | translate }}:
                </span>
                    <span>{{ctrl.relatedPublication.doi}}</span>
                </div>
                <div style="margin-bottom: 0.5em;" ng-if="ctrl.relatedPublication.sourceLink" layout="row">
                    <div style="font-weight: bold;">{{'related-publication-management.detail.sourceLink' | translate }}:&nbsp;
                    </div>
                    <div class="fdz-truncate-string" flex>
                        <a target="_blank" style="display: block;" ng-href="{{ctrl.relatedPublication.sourceLink}}">{{ctrl.relatedPublication.sourceLink}}</a>
                    </div>
                </div>
            </md-card-content>
        </md-card>
        <md-card flex-gt-sm="40" ng-class="{'fdz-reset-left-margin': $mdMedia('gt-sm'), 'fdz-reset-top-margin': $mdMedia('sm') || $mdMedia('xs')}">
            <md-card-header>
                <md-card-header-text>
                    <h2 class="md-title">{{'global.cards.related-objects' | translate }}</h2>
                </md-card-header-text>
            </md-card-header>
            <md-divider></md-divider>
            <md-card-content>
                <div ng-init="studies = ctrl.relatedPublication.studies" style="margin-bottom: 0.5em; width: 100%;" layout="row">
                    <div ng-if="studies.length === 0" class="fdz-truncate-string" flex>
                        <md-icon md-svg-src="/assets/images/icons/study.svg"></md-icon>
                        {{'study-management.detail.studies' | translate }}: {{'global.messages.error.unavailable' | translate}}
                    </div>
                    <div ng-if="studies.length === 1" class="fdz-truncate-string" flex>
                        <a ui-sref="studyDetail({'id': studies[0].id})">
                            <md-icon md-svg-src="/assets/images/icons/study.svg"></md-icon>
                            {{'study-management.detail.study' | translate }}: {{studies[0].title[currentLanguage]}}</a>
                    </div>
                    <div ng-if="studies.length > 1" class="fdz-truncate-string" flex>
                        <a ui-sref="search({'type': 'studies', 'related-publication':ctrl.relatedPublication.id, 'page': 1})">
                            <md-icon md-svg-src="/assets/images/icons/study.svg"></md-icon>
                            {{'study-management.detail.studies' | translate }}: ({{studies.length}})</a>
                    </div>
                </div>
                <div ng-init="dataSets = ctrl.relatedPublication.dataSets" style="margin-bottom: 0.5em; width: 100%;" layout="row">
                    <div ng-if="dataSets.length === 0" class="fdz-truncate-string" flex>
                        <md-icon md-svg-src="/assets/images/icons/data-set.svg"></md-icon>
                        {{'data-set-management.detail.data-sets' | translate }}: {{'global.messages.error.unavailable' | translate}}
                    </div>
                    <div ng-if="dataSets.length === 1" class="fdz-truncate-string" flex>
                        <a ui-sref="data-setDetail({'projectId': dataSets[0].dataAcquisitionProjectId, 'dataSetNumber': dataSets[0].number})">
                            <md-icon md-svg-src="/assets/images/icons/data-set.svg"></md-icon>
                            {{'data-set-management.detail.data-set' | translate }}: {{dataSets[0].description[currentLanguage]}}</a>
                    </div>
                    <div ng-if="dataSets.length > 1" class="fdz-truncate-string" flex>
                        <a ui-sref="search({'type': 'data_sets', 'related-publication':ctrl.relatedPublication.id, 'page': 1})">
                            <md-icon md-svg-src="/assets/images/icons/data-set.svg"></md-icon>
                            {{'data-set-management.detail.data-sets' | translate }}: ({{dataSets.length}})</a>
                    </div>
                </div>
                <div ng-init="surveys = ctrl.relatedPublication.surveys" style="margin-bottom: 0.5em; width: 100%;" layout="row">
                    <div ng-if="surveys.length === 0" class="fdz-truncate-string" flex>
                        <md-icon md-svg-src="/assets/images/icons/survey.svg"></md-icon>
                        {{'survey-management.detail.surveys' | translate }}: {{'global.messages.error.unavailable' | translate}}
                    </div>
                    <div ng-if="surveys.length === 1" class="fdz-truncate-string" flex>
                        <a ui-sref="surveyDetail({'projectId': surveys[0].dataAcquisitionProjectId,
                          'surveyNumber': surveys[0].number})">
                            <md-icon md-svg-src="/assets/images/icons/survey.svg"></md-icon>
                            {{'survey-management.detail.survey' | translate }}: {{surveys[0].title[currentLanguage]}}</a>
                    </div>
                    <div ng-if="surveys.length > 1" class="fdz-truncate-string" flex>
                        <a ui-sref="search({'type': 'surveys', 'related-publication':ctrl.relatedPublication.id, 'page': 1})">
                            <md-icon md-svg-src="/assets/images/icons/survey.svg"></md-icon>
                            {{'survey-management.detail.surveys' | translate }}: ({{surveys.length}})</a>
                    </div>
                </div>
                <div ng-init="instruments = ctrl.relatedPublication.instruments" style="margin-bottom: 0.5em; width: 100%;" layout="row">
                    <div ng-if="instruments.length === 0" class="fdz-truncate-string" flex>
                        <md-icon md-svg-src="/assets/images/icons/instrument.svg"></md-icon>
                        {{'instrument-management.detail.instruments' | translate }}: {{'global.messages.error.unavailable' | translate}}
                    </div>
                    <div ng-if="instruments.length === 1" class="fdz-truncate-string" flex>
                        <a ui-sref="instrumentDetail({'projectId': instruments[0].dataAcquisitionProjectId, 'instrumentNumber': instruments[0].number})">
                            <md-icon md-svg-src="/assets/images/icons/instrument.svg"></md-icon>
                            {{'instrument-management.detail.instrument' | translate }}: {{instruments[0].description[currentLanguage]}}</a>
                    </div>
                    <div ng-if="instruments.length > 1" class="fdz-truncate-string" flex>
                        <a ui-sref="search({'type': 'instruments', 'related-publication':ctrl.relatedPublication.id, 'page': 1})">
                            <md-icon md-svg-src="/assets/images/icons/instrument.svg"></md-icon>
                            {{'instrument-management.detail.instruments' | translate }}: ({{instruments.length}})</a>
                    </div>
                </div>
                <div ng-init="questions = ctrl.relatedPublication.questions" style="margin-bottom: 0.5em; width: 100%;" layout="row">
                    <div ng-if="questions.length === 0" class="fdz-truncate-string" flex>
                        <md-icon md-svg-src="/assets/images/icons/question.svg"></md-icon>
                        {{'question-management.detail.questions' | translate }}: {{'global.messages.error.unavailable' | translate}}
                    </div>
                    <div ng-if="questions.length === 1" class="fdz-truncate-string" flex>
                        <a ui-sref="questionDetail({'projectId': questions[0].dataAcquisitionProjectId, 'instrumentNumber': questions[0].instrumentNumber, 'questionNumber': questions[0].number})">
                            <md-icon md-svg-src="/assets/images/icons/question.svg"></md-icon>
                            {{'question-management.detail.question' | translate }}: {{questions[0].questionText[currentLanguage]}}</a>
                    </div>
                    <div ng-if="questions.length > 1" class="fdz-truncate-string" flex>
                        <a ui-sref="search({'type': 'questions', 'related-publication':ctrl.relatedPublication.id, 'page': 1})">
                            <md-icon md-svg-src="/assets/images/icons/question.svg"></md-icon>
                            {{'question-management.detail.questions' | translate }}: ({{questions.length}})</a>
                    </div>
                </div>
                <div ng-init="variables = ctrl.relatedPublication.variables" style="margin-bottom: 0.5em; width: 100%;" layout="row">
                    <div ng-if="variables.length === 0" class="fdz-truncate-string" flex>
                        <md-icon md-svg-src="/assets/images/icons/variable.svg"></md-icon>
                        {{'variable-management.detail.variables' | translate }}: {{'global.messages.error.unavailable' | translate}}
                    </div>
                    <div ng-if="variables.length === 1" class="fdz-truncate-string" flex>
                        <a ui-sref="variableDetail({'projectId': variables[0].dataAcquisitionProjectId, 'dataSetNumber': variables[0].dataSetNumber, 'variableName': variables[0].name})">
                            <md-icon md-svg-src="/assets/images/icons/variable.svg"></md-icon>
                            {{'variable-management.detail.variable' | translate }}: {{variables[0].label[currentLanguage]}}</a>
                    </div>
                    <div ng-if="variables.length > 1" class="fdz-truncate-string" flex>
                        <a ui-sref="search({'type': 'variables', 'related-publication':ctrl.relatedPublication.id, 'page': 1})">
                            <md-icon md-svg-src="/assets/images/icons/variable.svg"></md-icon>
                            {{'variable-management.detail.variables' | translate }}: ({{variables.length}})</a>
                    </div>
                </div>
            </md-card-content>
        </md-card>
    </div>
    <div layout="column" layout-gt-sm="row">
        <md-card flex-gt-sm>
            <md-card-header>
                <md-card-header-text>
                    <h2 class="md-title">{{'related-publication-management.detail.abstract' | translate }}</h2>
                </md-card-header-text>
            </md-card-header>
            <md-divider></md-divider>
            <md-card-content>
                <div style="margin-bottom: 0.5em;" ng-if="ctrl.relatedPublication.publicationAbstract">
                    <span>{{ctrl.relatedPublication.publicationAbstract}}</span>
                </div>
                <div style="margin-bottom: 0.5em;" ng-if="ctrl.relatedPublication.abstractSource">
                    <span style="font-weight: bold;">{{'related-publication-management.detail.abstract-source' | translate }}:
                  </span>
                    <span>{{ctrl.relatedPublication.abstractSource[currentLanguage]}}</span>
                </div>


            </md-card-content>
        </md-card>
    </div>
</div>
