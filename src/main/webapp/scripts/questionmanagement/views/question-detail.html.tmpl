<div ng-if="ctrl.question.$resolved && ctrl.question.id">
    <div layout="column" layout-gt-sm="row">
        <md-card flex-gt-sm>
            <div style="max-height: 400px; overflow-y:auto;">
                <a ng-href="/public/files/questions/{{ctrl.question.id}}" title="{{ctrl.question.questionText[currentLanguage] }}" target="_blank">
                    <img alt="" style="width:auto; max-width:100%; height:auto;" ng-src="public/files/questions/{{ctrl.question.id}}"/>
                </a>
            </div>
        </md-card>
        <md-card flex-gt-sm="40" ng-class="{'fdz-reset-left-margin': $mdMedia('gt-sm'), 'fdz-reset-top-margin': $mdMedia('sm') || $mdMedia('xs')}">
            <md-card-header>
                <md-card-header-text>
                    <h2 class="md-title">{{'global.cards.related-objects' | translate }}</h2>
                </md-card-header-text>
            </md-card-header>
            <md-divider></md-divider>
            <md-card-content layout="column" layout-align="center start">
                <div style="margin-bottom: 0.5em; width: 100%;" layout="row">
                    <md-icon md-svg-src="/assets/images/icons/study.svg" style="margin-top:0px; margin-right:4px;"></md-icon>
                    <div style="margin-right:3px;">{{'study-management.detail.study' | translate }}:</div>
                    <div ng-if="!ctrl.study" class="fdz-truncate-string" flex>{{'global.messages.error.unavailable' | translate}}</div>
                    <div ng-if="ctrl.study" class="fdz-truncate-string" flex>
                        <a ui-sref="studyDetail({id:ctrl.study.dataAcquisitionProjectId})">{{ctrl.study.title}}</a>
                    </div>
                </div>
                <div style="margin-bottom: 0.5em; width: 100%;" layout="row">
                    <md-icon md-svg-src="/assets/images/icons/instrument.svg" style="margin-top:0px; margin-right:4px;"></md-icon>
                    <div style="margin-right:3px;">{{'instrument-management.detail.instrument' | translate }}:</div>
                    <div ng-if="!ctrl.instrument" class="fdz-truncate-string" flex>{{'global.messages.error.unavailable' | translate}}</div>
                    <div ng-if="ctrl.instrument" class="fdz-truncate-string" flex>
                        <a ui-sref="instrumentDetail({id:ctrl.instrument.id})">{{ctrl.instrument.title}}</a>
                    </div>
                </div>
                <div style="margin-bottom: 0.5em; width: 100%;" layout="row">
                    <md-icon md-svg-src="/assets/images/icons/variable.svg" style="margin-top:0px; margin-right:4px;"></md-icon>
                    <div style="margin-right:3px;">{{'variable-management.detail.variables' | translate }}:</div>
                    <div ng-if="ctrl.counts.variablesCount == 0" class="fdz-truncate-string" flex>{{'global.messages.error.unavailable' | translate}}</div>
                    <div ng-if="ctrl.counts.variablesCount > 0" class="fdz-truncate-string" flex>
                        <a ng-click="ctrl.showRelatedVariables()">({{ctrl.counts.variablesCount}})</a>
                    </div>
                </div>
                <div style="margin-bottom: 0.5em; width: 100%;" layout="row">
                    <md-icon md-svg-src="/assets/images/icons/related-publication.svg" style="margin-top:0px; margin-right:4px;"></md-icon>
                    <div style="margin-right:3px;">{{'related-publication-management.detail.publications' | translate }}:</div>
                    <div ng-if="ctrl.counts.publicationsCount == 0" class="fdz-truncate-string" flex>{{'global.messages.error.unavailable' | translate}}</div>
                    <div ng-if="ctrl.counts.publicationsCount > 0" class="fdz-truncate-string" flex>
                        <a ng-click="ctrl.showRelatedPublications()">({{ctrl.counts.publicationsCount}})</a>
                    </div>
                </div>
            </md-card-content>
        </md-card>
    </div>
    <div layout="column" layout-gt-sm="row">
        <md-card flex-gt-sm="50" class="fdz-reset-top-margin">
            <md-card-header>
                <md-card-header-text>
                    <h2 class="md-title">{{'question-management.detail.predecessors' | translate }}</h2>
                </md-card-header-text>
            </md-card-header>
            <md-divider></md-divider>
            <md-content style="background-color:white;">
                <div ng-repeat="predecessor in ctrl.predecessors">
                    <question-search-result search-result="predecessor._source"></question-search-result>
                </div>
                <div layout="row" layout-align="center center" ng-if="ctrl.predecessors.length == 0" layout-padding>
                    {{'question-management.detail.no-predecessors' | translate}}
                </div>
            </md-content>
        </md-card>
        <md-card flex-gt-sm="50" class="fdz-reset-top-margin" ng-class="{'fdz-reset-left-margin': $mdMedia('gt-sm')}">
            <md-card-header>
                <md-card-header-text>
                    <h2 class="md-title">{{'question-management.detail.successors' | translate }}</h2>
                </md-card-header-text>
            </md-card-header>
            <md-divider></md-divider>
            <md-content style="background-color:white;">
                <div ng-repeat="successor in ctrl.successors">
                    <question-search-result ng search-result="successor._source"></question-search-result>
                </div>
                <div layout="row" layout-align="center center" ng-if="ctrl.successors.length == 0" layout-padding>
                    {{'question-management.detail.no-successors' | translate }}
                </div>
            </md-content>
        </md-card>
    </div>
    <div ng-if="ctrl.question.technicalRepresentation" layout="row">
        <md-card flex class="fdz-reset-top-margin">
            <md-card-header layout-align="center center">
                <md-card-header-text>
                    <h2 class="md-title">{{'question-management.detail.technical-representation' | translate }}
                        ({{ctrl.question.technicalRepresentation.type}})</h2>
                </md-card-header-text>
            </md-card-header>
            <md-divider></md-divider>
            <md-card-content>
                <div class="fdz-overlay-outer-box">
                    <div hljs hljs-language="{{ctrl.question.technicalRepresentation.language}}" hljs-source="ctrl.technicalRepresentationBeauty" style="margin-top: 0.5em;" class="fdz-code-container" ng-class="{'fdz-hidden-code': ctrl.representationCodeToggleFlag}"></div>
                    <div class="fdz-overlay-inner-box">
                        <md-button
                            ng-click="ctrl.openSuccessCopyToClipboardToast('question-management.log-messages.question.technical-representation-success-copy-to-clipboard')"
                            class="md-icon-button md-primary"
                            ngclipboard
                            data-clipboard-text="{{ctrl.technicalRepresentationBeauty}}"
                            aria-label="{{'question-management.detail.button.aria-label.copy-to-clipboard' | translate}">
                            <md-icon md-font-library="material-icons">content_copy</md-icon>
                            <md-tooltip md-direction="top">
                                {{'question-management.detail.button.aria-label.copy-to-clipboard' | translate}}
                            </md-tooltip>
                        </md-button>
                        <md-button class="md-icon-button md-primary" ng-click="ctrl.toggleRepresentationCode()">
                            <div>
                                <md-icon ng-if="ctrl.representationCodeToggleFlag" md-svg-src="/assets/images/icons/arrow-expand.svg"></md-icon>
                                <md-icon ng-if="!ctrl.representationCodeToggleFlag" md-svg-src="/assets/images/icons/arrow-compress.svg"></md-icon>
                                <md-tooltip md-direction="top">
                                    {{'question-management.detail.show-complete-technical-representation.' + ctrl.representationCodeToggleFlag | translate }}
                                </md-tooltip>
                            </div>
                        </md-button>
                    </div>
                </div>
            </md-card-content>
        </md-card>
    </div>
</div>
